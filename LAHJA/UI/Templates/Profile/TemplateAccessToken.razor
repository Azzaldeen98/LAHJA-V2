@* @page "/settings/spaces/{*subscriptionId}" *@
@using LAHJA.Data.UI.Components
@using LAHJA.UI.Components.ServiceCard
@using LAHJA.UI.Components.TabelCard
@inject IDialogService DialogService
@inject ISnackbar Snackbar
@using LAHJA.UI.Components.ProFile.Settings
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]

@inject LAHJA.Data.UI.Templates.Profile.TemplateProfile Template




@if (Template != null )
{
    <AccessTokensTemplate DataBuild="dataBuild" />
}


@code {


    private string lg = "ar";

    [Parameter] public string subscriptionId{ set; get; }
    [Parameter] public string spaceId{ set; get; }

    private List<AccessTokenAuth> dataBuild = new List<AccessTokenAuth>
    {
        new AccessTokenAuth { SpaceId = "space-001", Subscription = "free", AccessToken = "token-123", ApiEndpoint = "https://api.huggingface.co", CreationDate = DateTime.Now.AddDays(-10), Status = true },
        new AccessTokenAuth { SpaceId = "space-002", Subscription = "pro", AccessToken = "token-456", ApiEndpoint = "https://api.huggingface.co", CreationDate = DateTime.Now.AddDays(-5), Status = false },
        new AccessTokenAuth { SpaceId = "space-003", Subscription = "enterprise", AccessToken = "token-789", ApiEndpoint = "https://api.huggingface.co", CreationDate = DateTime.Now.AddDays(-1), Status = false }
    };

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {

        if (firstRender)
        {
            try
            {

                if (Template.BuilderComponents.GetSessionsAccessTokens != null)
                {
                    var response = await Template.BuilderComponents.GetSessionsAccessTokens();
                    if (response.Succeeded && response.Data != null)
                    {
                        dataBuild = response.Data;
                        StateHasChanged();
                    }

                }


            }catch(Exception e)
            {
                
            }

        }

    
    }







}
